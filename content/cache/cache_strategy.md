# Cache 전략 2가지

### Lazy loading

- 클라이언트에게 데이터가 필요로 해질 때 cache에 로딩하는 전략
- 방법
  - 클라이언트가 서버에 데이터를 요청 
  - 서버는 cache에 해당 데이터가 있는 지 확인 
  - cache에 데이터가 존재 → 바로 클라이언트에게 데이터 반환 
  - cache에 데이터가 존재하지 않음 → 데이터 조회 → cache에 데이터 저장 → 클라이언트에게 데이터 반환 
- 장점 
  - 요청 받은 데이터만 cache에 저장 
  - cache miss가 발생했을 때, 차선책으로 실제 데이터에 접근하여 최신 데이터를 가져와 치명적이지 않음


### Write-through

- 데이터를 추가하거나 업데이트 할 때 cache에 동시에 업데이트 하는 전략 
- 방법 
  - 데이터 추가 시, DB와 cache 모두 업데이트 
  - 조회 시, 실제 DB를 볼 필요 없이 cache에서 조회 
- 장점 
  - cache는 항상 최신 데이터를 유지 → 빠르게 조회 가능 
- 단점 
  - 데이터를 업데이트 할 때 마다 DB와 cache에 모두 쓰기 때문에 딜레이 발생 가능 
  - 대부분의 데이터가 조회되지 않는 경우 리소스 낭비로 이어짐


각 전략의 단점을 보완하기 위해 `TTL`을 사용하자 
- TTL(Time To Live): key가 자연스럽게 만료되어 없어지게 하는 시간


각 전략에 TTL을 설정한다면 
- Lazy loading 
  - 자연스럽게 값이 삭제되고 cache miss를 일으켜 최신 데이터를 유지할 수 있게 됨
- Write-through 
  - 업데이트가 되지 않는 데이터는 없어지게 됨 → 메모리 이득